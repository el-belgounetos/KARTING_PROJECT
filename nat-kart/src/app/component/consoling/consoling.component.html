<div class="fixed inset-0 w-full h-full bg-cover bg-center -z-10 blur-[3px]"
  style="background-image: url('/assets/wallpaper/wallpaper5.jpg');"></div>
<div class="h-[93vh] w-full flex flex-col p-4 overflow-hidden">

  <!-- Button with toggle for consoles list -->
  <div class="flex flex-col items-center gap-2 mb-4">
    <div class="relative flex justify-center items-center w-full max-w-[500px]">
      <p-button styleClass="consoling-button" [disabled]="isLoading" label="Tourner la roue" (click)="onSpin()">
      </p-button>

      <div class="absolute right-0">
        <p-button (click)="isConsolesVisible = !isConsolesVisible"
          [icon]="isConsolesVisible ? 'pi pi-chevron-up' : 'pi pi-chevron-down'"
          styleClass="p-button-rounded p-button-secondary" [style]="{'width': '3rem', 'height': '3rem'}">
        </p-button>
      </div>
    </div>
  </div>

  <!-- Collapsible Consoles List - Vertical on mobile, Grid on desktop -->
  @if (isConsolesVisible) {
  <div class="flex flex-col lg:grid gap-4 overflow-y-auto lg:overflow-visible flex-1"
    [ngStyle]="{'grid-template-columns': calculateConsolesPerLine() > 0 ? 'repeat(' + calculateConsolesPerLine() + ', 1fr)' : '1fr'}">
    @for (console of consolesDisplayed; track console; let index = $index) {
    <div
      class="h-auto lg:h-full text-white font-bold text-lg lg:text-xl bg-gray-700/90 border-2 border-gray-500 rounded-xl lg:rounded-2xl flex flex-col items-center justify-between text-center p-6 lg:p-4 gap-4">
      <div class="text-xl lg:text-lg">{{ console.name }}</div>
      <p-image [src]="'http://localhost:8080/images/consoles/' + console.picture" alt="console" width="120"
        class="flex-shrink-0"></p-image>

      <div
        class="bg-black/65 w-[120px] h-[120px] flex flex-col items-center justify-center border-4 border-yellow-400 rounded-lg lg:rounded-xl">
        <p-image [src]="allCupsImages[index]" width="100" class="flex-shrink-0" />
      </div>
    </div>
    }
  </div>
  }
</div>